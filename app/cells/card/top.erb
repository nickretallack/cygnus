<div class = "card top-card" id = <%= @user.top_card.id %> >
  <input type = "hidden" name = "can_modify" value = "<%= can_modify? @user %>">
  <div class = "row hc js" id = "triggers">
    <span>
      <a name = "view" <%= "start" unless can_modify? @user %>>View Mode</a>
      <div class = "vdiv"></div>
      <a name = "edit" <%= "start" if can_modify? @user %>>Edit Mode</a>
      <div class = "vdiv"></div>
      <a name = "reorder">Reorder Mode</a>
    </span>
  </div>
  <div class = "card-content">
    <div class = "card-title">

      <div id = "lists">
        <% @user.lists.each do |list| %>
          <%= cell(:card, list).(:list) %>
        <% end %>
        <% if can_modify? @user %>
          <%= cell(:card).(:new_list) %>
        <% end %>
      </div>

      <% if can_modify? @user %>

        <div class = "reorder-mode">
          <%= form_for @user.top_card, url: reorder_cards_path(@user, @user.top_card), method: :patch, html: { class: "button-submit" } do |f| %>
            <%= f.hidden_field :order, value: "" %> <!-- :order is not a property, only works if value is explicitly specified -->
            <%= f.submit "Finalize Order", id: "save" %>
          <% end %>
          <div class = "button-area float"></div>
        </div>

      <% end %>
    </div>
  </div>
</div>