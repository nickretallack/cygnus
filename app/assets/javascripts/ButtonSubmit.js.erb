ButtonSubmit = (function(){

    var self;

    var ButtonSubmit = function(element){

        this.form = element;
        this.area = element.siblings(".button-area").safeAdd();
        this.icons = JSON.parse('<%= CONFIG[:button_icons].to_json %>');
        this.initialize();

    };

    Make.extend(ButtonSubmit.prototype, {

        initialize: function(){
            var self = this;
            $.each(this.icons, function(name, icon){
                var button = self.form.children("#"+name);
                if(!button.exists()) return;
                self.area.append($("<i />", {
                    class: "material-icons medium",
                    text: icon,
                    title: name.capitalize(),
                    css: {
                        cursor: "pointer",
                        marginLeft: "3%",
                        marginRight: "3%"
                    }
                }).on("click.submit", function(event){
                    pause(event);
                    button.trigger("click");
                }));
                button.hide();
            });
            var attachmentButton = this.area.children().filter(function(index, element){
                return $(element).prop("textContent") === '<%= CONFIG[:button_icons][:create] %>';
            });
            if(attachmentButton.exists()) attachmentButton.appendTo(this.area);
        }

    });

    return ButtonSubmit;

})();