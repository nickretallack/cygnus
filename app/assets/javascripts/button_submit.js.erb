loadFunctions.push(function(){

    var forms = $(".button-submit");

    ButtonSubmit = (function(){

        var ButtonSubmit = function(element){

            this.form = element;
            this.area = element.siblings(".button-area");
            this.icons = JSON.parse('<%= CONFIG[:button_icons].to_json %>');
            this.buttonCss = {
                color: "black",
                cursor: "pointer",
                marginLeft: "3%",
                marginRight: "3%"
            };
            this.initialize();

        };

        Make.extend(ButtonSubmit.prototype, {

            initialize: function(){
                var self = this;
                $.each(this.icons, function(name, icon){
                    var button = self.form.children("#"+name);
                    if(!button.exists()) return;
                    self.form.attr("data-remote", true);
                    self.area.append($("<i />", {
                        class: "material-icons medium-small",
                        text: icon,
                        title: name.capitalize(),
                        css: self.buttonCss
                    }).on("click.submit", function(event){
                        pauseEvent(event);
                        button.trigger("click");
                    }));
                    button.hide();
                })
            }

        });

        return ButtonSubmit;

    })();

    forms.each(function(index, element){ new ButtonSubmit($(element)); });

});